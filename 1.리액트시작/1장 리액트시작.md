# 왜 리액트인가?
slack, Atom, VSCode 등 유명한 데스크톱 애플리케이션을 일렉트론(Electron)(자바스크립트로 데스크톱 애플리케이션을 만들 수 있는 프레임워크)으로 개발했습니다.
모바일 애플리케이션도 마찬가지입니다.

이제 자바스크립트만으로도 규모가 큰 애플리케이션을 만들 수 있는 시대가 왔습니다.
대규모 애플리케이션 중 프런트엔드 사이드에서 돌아가는 애플리케이션 구조를 관리하려면 어떻게 해야 할까?
지금까지 수많은 프레임워크가 조금씩 다른 관점에서 이를 해결하려고 노력해 왔습니다.
 - AngularJS
 - Backbone.js
 - Derby.js
 - Ember.js
 - Knockback.js
 - Sammy.js
 - pureMVC
 - Vue.js
<br/>

이 프레임워크들은 MVC(Model-View-Comtroller) 아키텍처, MVVM(Model-View-View Model) 아키텍처, AngularJS는 MVW(Model-View-Whatever) 아키텍처로 애플리케이션을 구조화합니다.

**모델**(Model)은 애플리케이션에서 사용하는 데이터를 관리하는 영역
**뷰**(View)는 유저에게 보이는 부분
**컨트롤러**(Controller)는 모델 데이터를 조회하거나 수정하고, 변경된 사항을 뷰에 반영

![img](https://t1.daumcdn.net/cfile/tistory/2405DC46577868AF13)

반영하는 과정에서 보통 뷰를 변형(mutate) 합니다.
예를 들어 다음 JSON 객체 값을 사용하는 뷰가 있습니다.
```javascript
{
    "title": "Hello",
    "contents": "Hello World",
    "author": "gahusb",
    "likes": 1
}
```
```javascript
<div id="post-1">
    <div class="title">Hello</div>
    <div class="contents">Hello World</div>
    <div class="author">gahusb</div>
    <div class="likes">1</div>
</div>
```
likes 값을 2로 업데이트 한다면 애플리케이션에서 post-1의 likes 요소를 찾아 내부를 수정해야 합니다. 이와 같은 예제는 간단히 수정이 가능하지만 규모가 커지면 상당히 복잡해지고 제대로 관리하지 않으면 성능도 떨어질 수 있습니다.

이를 해결하기 위해 페이스북 개발 팀에서 고안한 아이디어가 하나 있는데, 어떤 데이터가 변할 때마다 어떤 변화를 줄지 고민하는 것이 아니라 그냥 기존 뷰를 날려버리고 처음부터 새로 렌더링하는 방식입니다.
이렇게 하면 애플리케이션 구조가 매우 간단하고, 작성해야 할 코드양도 많이 줄어듭니다.
더 이상 어떻게 변화를 줄지 신경 쓸 필요가 없고, 그저 뷰가 어떻게 생길지 선언하며, 데이터에 변화가 있으면 기존에 있던 것은 버리고 정해진 규칙에 따라 새로 렌더링하면 되니까요.

이를 위해 개발된것이 바로 **리액트**(React)입니다.
![img](https://velopert.com/wp-content/uploads/2016/03/react.png)

<br/>

***
## 리액트의 이해
리액트는 자바스크립트 라이브러리로 유저 인터페이스를 만드는데 사용합니다.
구조가 MVC, MVW 등인 프레임워크와 달리, **오직 V만 신경 쓰는 라이브러리 입니다.**

리액트 프로젝트에서 특정 부분이 어떻게 생길지 정하는 선언체가 있는데, 이를 컴포넌트(component)라고 합니다.
컴포넌트는 다른 프레임워크에서 유저 인터페이스를 다룰 떄 사용하는 템플릿과는 다른 개념입니다.
 - 컴포넌트는 재사용이 가능한 API로 수많은 기능들을 내장하고 있습니다.
 - 컴포넌트 하나에서 해당 컴포넌트의 생김새와 작동 방식을 정의합니다.

사용자 화면에 뷰를 보여 주는 것을 렌더링이라고 합니다.
리액트 라이브러리는 뷰를 어떻게 렌더링하길래 데이터가 변할 때마다 새롭게 리렌더링하면서 성능을 아끼고, 최적의 유저 경험을 제공 할 수 있을까요?

#### 초기 렌더링
 - 어떤 UI 관련 프레임워크, 라이브러리를 사용하든지 간에 가장 처음 어떻게 보일지를 정하는 '초기 렌더링'이 필요합니다.
 - 리액트에서는 이를 다루는 render 함수가 있습니다.
 ```
 render() { ... }
 ```
 - 이 함수는 컴포넌트가 어떻게 생겼는지 정의하는 역할을 합니다.
 - 이 함수는 html 형식의 문자열을 반환하지 않고, 뷰가 어떻게 생겼고 어떻게 작동하는지 정보를 지닌 객체를 반환합니다.
 - 컴포넌트 내부에는 또 다른 컴포넌트들이 들어갈 수 있습니다. 이때, render 함수를 실행하면 그 내부에 있는 컴포넌트들도 재귀적으로 렌더링합니다.
 - 이렇게 최상위 컴포넌트의 렌더링 작업이 끝나면 지니고 있는 정보들을 사용하여 HTML markup을 만들고, 이를 우리가 정하는 실제 페이지의 DOM 요소 안에 주입합니다.

#### 조화 과정
 - 컴포넌트에서 데이터에 변화가 있을 때 우리가 보기에는 변화에 따라 뷰가 변형되는 것처럼 보이지만, 사실은 새로운 요소로 갈아끼우기 때문에 '조화 과정을 거친다' 라고 합니다.
 - 이 작업 또한 render 함수가 맡아서 합니다.
    - 컴포넌트는 데이터를 업데이트 했을 때 단순히 업데이트한 값을 수정하는 것이 아니라,
    - 새로운 데이터를 가지고 render 함수를 또 다시 호출합니다.
    - 이때 render 함수가 반환하는 결과를 곧바로 DOM에 반영하지 않고,
    - 이전에 render 함수가 만들었던 컴포넌트 정보와 현재 render 함수가 만든 컴포넌트 정보를 비교합니다.
    - 자바스크립트를 사용하여 두 가지 뷰를 최소한의 연산으로 비교한 후,
    - 둘의 차이를 알아내 최소한의 연산으로 DOM 트리를 업데이트하는 것입니다.
***
## 리액트 특징
#### DOM이란?
 - DOM은 Document Object Model의 약어입니다.
 - 즉, 객체로 문서 구조를 표현하는 방법으로 XML이나 HTML로 작성합니다.
 - 웹 브라우저는 DOM을 활용하여 객체에 자바스크립트와 CSS를 적용합니다.
 ![img](https://images.slideplayer.com/12/3383832/slides/slide_2.jpg)
#### DOM은 과연 느릴까요?
 - DOM에는 치명적인 문제점이 하나 있습니다. 바로 동적 UI에 최적화되어 있지 않다는 것입니다.
 - HTML은 자체적으로 정적입니다. Javascript를 사용하여 이를 동적으로 만들 수 있지요.
 - 규모가 큰 웹 애플리케이션에서 DOM에 직접 접근하여 변화를 주다 보면 성능 이슈가 조금씩 발생하기 시작합니다.
    - DOM 자체는 빠릅니다.
    - 단 웹 브라우저 단에서 DOM에 변화가 일어나면 웹 브라우저가 CSS를 다시 연산하고, 레이아웃을 구성하고, 페이지를 리페인트합니다.
    - 이 과정에서 시간이 허비되는 것입니다.
 - 해결법
    - DOM을 최소한으로 조작하여 작업을 처리하는 방식으로 개선할 수 있습니다.
    - React는 Virtual DOM 방식을 사용하여 DOM 업데이트를 추상화함으로써 DOM 처리 횟수를 최소화하고 효율적으로 진행합니다.
#### Virtual DOM
Virtual DOM을 사용하면 실제 DOM에 접근하여 조작하는 대신, 이를 추상화한 자바스크립트 객체를 구성하여 사용합니다. 마치 실제 DOM의 가벼운 사본과 비슷하죠.

리액트에서 데이터가 변하여 웹 브라우저에 실제 DOM을 업데이트할 때는 다음 세 가지 절차를 밟습니다.
 1. 데이터를 업데이트하면 전체 UI를 Virtual DOM에 리렌더링합니다.
 2. 이전 Virtual DOM에 있던 내용과 현재 내용을 비교합니다.
 3. 바뀐 부분만 실제 DOM에 적용합니다.
![img](https://image.slidesharecdn.com/virtualdom-170404105340/95/virtual-dom-44-638.jpg?cb=1491303707)

 - 오해
    - Virtual DOM을 사용한다고 해서 사용하지 않을 때와 비교하여 무조건 빠른 것은 아닙니다.
    - '우리는 다음 문제를 해결하려고 리액트를 만들었습니다. **지속적으로 데이터가 변화하는 대규모 애플리케이션 구축하기**'
    - 매우 간단한 작업할 때는 오히려 사용하지 않는 편이 더 나은 성능을 보이기도 합니다.
 - 리액트와 Virtual DOM이 언제나 제공할 수 있는 것은 바로 업데이트 처리 간결성입니다.
 - UI를 업데이트하는 과정에서 생기는 복잡함을 모두 해소하고, 더욱 쉽게 업데이트에 접근할 수 있습니다.
#### 기타 특징
 - 리액트는 오직 뷰만 담당합니다.
 - 리액트는 프레임워크가 아니라 라이브러리입니다.
 - 그러므로 기타 기능은 직접 구현하여 사용해야 합니다.
 - 다른 개발자들이 만든 라이브러리를 적극 사용한다.
    - 라우팅에는 리액트 라우터(react-route)
    - Ajax 처리에는 axios || fetch
    - 상태 관리에는 리덕스(redux) || MobX
 - 리액트는 다른 웹 프레임워크나 라이브러리와 혼용할 수도 있습니다.
    - Backbone.js
    - AngularJS
    - etc
***